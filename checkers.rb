#!/usr/bin/env ruby


#          1      2      3      4      5      6      7      8
#      +--------------------------------------------------------+
#      |#######       #######       #######       #######       |
#   a  |#######  0-1  #######  0-3  #######  0-5  #######  0-7  |
#      |#######       #######       #######       #######       |
#      |       #######       #######       #######       #######|
#   b  |  1-0  #######  1-2  #######  1-4  #######  1-6  #######|
#      |       #######       #######       #######       #######|
#      |#######       #######       #######       #######       |
#   c  |#######  2-1  #######  2-3  #######  2-5  #######  2-7  |
#      |#######       #######       #######       #######       |
#      |       #######       #######       #######       #######|
#   d  |  3-0  #######  3-2  #######  3-4  #######  3-6  #######|
#      |       #######       #######       #######       #######|
#      |#######       #######       #######       #######       |
#   e  |#######  4-1  #######  4-3  #######  4-5  #######  4-7  |
#      |#######       #######       #######       #######       |
#      |       #######       #######       #######       #######|
#   f  |  5-0  #######  5-2  #######  5-4  #######  5-6  #######|
#      |       #######       #######       #######       #######|
#      |#######       #######       #######       #######       |
#   g  |#######  6-1  #######  6-3  #######  6-5  #######  6-7  |
#      |#######       #######       #######       #######       |
#      |       #######       #######       #######       #######|
#   h  |  7-0  #######  7-2  #######  7-4  #######  7-6  #######|
#      |       #######       #######       #######       #######|
#      +--------------------------------------------------------+

ROWS = %w[ a b c d e f g h ]

def to_ii( pos ) # a2
  y = ROWS.index( pos.chop )
  x = pos.delete!( pos.chop ).to_i - 1

  [ y, x ]
end

def to_pos( ii ) # [ 0, 1 ]
  y = ROWS.values_at( ii[0] ).to_s
  x = ii[1] + 1

  "#{y}#{x}"
end

# piece shapes
STAR        = [ "   ^   ", " <   > ", "   v   " ]
STAR_KING   = [ "   ^   ", " < K > ", "   v   " ]
CIRCLE      = [ "   -   ", " (   ) ", "   -   " ]
CIRCLE_KING = [ "   -   ", " ( K ) ", "   -   " ]
JUMPED      = [ "       ", "   x   ", "       " ]
EMPTY       = [ "       ", "       ", "       " ]

# each space is 7 x 3
def board( p )
  w = "#######"
  e = "+--------------------------------------------------------+"

  "
          1      2      3      4      5      6      7      8
      #{e}
      |#{w}#{p[0][0]}#{w}#{p[1][0]}#{w}#{p[2][0]}#{w}#{p[3][0]}|
   a  |#{w}#{p[0][1]}#{w}#{p[1][1]}#{w}#{p[2][1]}#{w}#{p[3][1]}|
      |#{w}#{p[0][2]}#{w}#{p[1][2]}#{w}#{p[2][2]}#{w}#{p[3][2]}|
      |#{p[4][0]}#{w}#{p[5][0]}#{w}#{p[6][0]}#{w}#{p[7][0]}#{w}|
   b  |#{p[4][1]}#{w}#{p[5][1]}#{w}#{p[6][1]}#{w}#{p[7][1]}#{w}|
      |#{p[4][2]}#{w}#{p[5][2]}#{w}#{p[6][2]}#{w}#{p[7][2]}#{w}|
      |#{w}#{p[8][0]}#{w}#{p[9][0]}#{w}#{p[10][0]}#{w}#{p[11][0]}|
   c  |#{w}#{p[8][1]}#{w}#{p[9][1]}#{w}#{p[10][1]}#{w}#{p[11][1]}|
      |#{w}#{p[8][2]}#{w}#{p[9][2]}#{w}#{p[10][2]}#{w}#{p[11][2]}|
      |#{p[12][0]}#{w}#{p[13][0]}#{w}#{p[14][0]}#{w}#{p[15][0]}#{w}|
   d  |#{p[12][1]}#{w}#{p[13][1]}#{w}#{p[14][1]}#{w}#{p[15][1]}#{w}|
      |#{p[12][2]}#{w}#{p[13][2]}#{w}#{p[14][2]}#{w}#{p[15][2]}#{w}|
      |#{w}#{p[16][0]}#{w}#{p[17][0]}#{w}#{p[18][0]}#{w}#{p[19][0]}|
   e  |#{w}#{p[16][1]}#{w}#{p[17][1]}#{w}#{p[18][1]}#{w}#{p[19][1]}|
      |#{w}#{p[16][2]}#{w}#{p[17][2]}#{w}#{p[18][2]}#{w}#{p[19][2]}|
      |#{p[20][0]}#{w}#{p[21][0]}#{w}#{p[22][0]}#{w}#{p[23][0]}#{w}|
   f  |#{p[20][1]}#{w}#{p[21][1]}#{w}#{p[22][1]}#{w}#{p[23][1]}#{w}|
      |#{p[20][2]}#{w}#{p[21][2]}#{w}#{p[22][2]}#{w}#{p[23][2]}#{w}|
      |#{w}#{p[24][0]}#{w}#{p[25][0]}#{w}#{p[26][0]}#{w}#{p[27][0]}|
   g  |#{w}#{p[24][1]}#{w}#{p[25][1]}#{w}#{p[26][1]}#{w}#{p[27][1]}|
      |#{w}#{p[24][2]}#{w}#{p[25][2]}#{w}#{p[26][2]}#{w}#{p[27][2]}|
      |#{p[28][0]}#{w}#{p[29][0]}#{w}#{p[30][0]}#{w}#{p[31][0]}#{w}|
   h  |#{p[28][1]}#{w}#{p[29][1]}#{w}#{p[30][1]}#{w}#{p[31][1]}#{w}|
      |#{p[28][2]}#{w}#{p[29][2]}#{w}#{p[30][2]}#{w}#{p[31][2]}#{w}|
      #{e}
  "
end

def board_map
  [
    [ w,  0, w,  1, w,  2, w,  3 ],
    [  4, w,  5, w,  6, w,  7, w ],
    [ w,  8, w,  9, w, 10, w, 11 ],
    [ 12, w, 13, w, 14, w, 15, w ],
    [ w, 16, w, 17, w, 18, w, 19 ],
    [ 20, w, 21, w, 22, w, 23, w ],
    [ w, 24, w, 25, w, 26, w, 27 ],
    [ 28, w, 29, w, 30, w, 31, w ]
  ]
end

def print_maps
  edge = "       "
  
  # number based
  p = []
  
  (0..31).each do |e|
    if e < 10
      space = "   "
    else
      space = "  "
    end

    p.push( [ edge, "#{space}#{e}   ", edge ] )
  end

  puts board( p )

  # position based
  p, a = [], []

  (0..7).each do |e|
    if e.even? == true
      a.push( "#{e}-1", "#{e}-3", "#{e}-5", "#{e}-7" )
    else
      a.push( "#{e}-0", "#{e}-2", "#{e}-4", "#{e}-6" )
    end
  end

  a.each { |e| p.push( [ edge, "  #{e}  ", edge ] ) }

  puts board( p )
end

def piece_puts( p )
  p.each { |e| puts e }
  puts
end

pieces = [ 
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING, CIRCLE, CIRCLE_KING, EMPTY,
  STAR, STAR_KING
]

#puts board( pieces )
#print_maps

#piece_puts( STAR )
#piece_puts( STAR_KING )
#piece_puts( CIRCLE )
#piece_puts( CIRCLE_KING )
#piece_puts( EMPTY )
#piece_puts( JUMPED )
